<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8" />
  <title>Processador de Arquivos - LacPoint</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Bibliotecas de parsing -->
  <script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
</head>

<body class="bg-gray-50 text-slate-800 min-h-screen">
  <main class="max-w-6xl mx-auto p-8">
    <!-- Header -->
    <header class="text-center mb-8">
      <h1 class="text-3xl font-bold text-gray-900 mb-2">
        Processamento e Visualiza√ß√£o de Dados
      </h1>
      <p class="text-gray-600">Carregue arquivos CSV, JSON, XML ou TXT para an√°lise e visualiza√ß√£o</p>
    </header>

    <!-- Formul√°rio -->
    <div class="bg-white rounded-lg shadow-sm border p-6 mb-6">
      <div class="space-y-4">
        <div>
          <label for="fileInput" class="block text-sm font-medium text-gray-700 mb-2">
            Selecionar Arquivo
          </label>
          <input id="fileInput" type="file" accept=".csv,.json,.xml,.txt"
            class="text-sm text-gray-700 cursor-pointer
                   file:mr-3 file:py-2 file:px-4 file:rounded-lg file:border-0 
                   file:text-sm file:font-semibold file:bg-blue-600 file:text-white 
                   file:cursor-pointer hover:file:bg-blue-700
                   bg-white border border-gray-300 rounded-lg py-2 px-3
                   hover:bg-blue-50 hover:border-blue-300 transition-all duration-200
                   focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500" />

          <p class="mt-1 text-xs text-gray-500">Formatos suportados: CSV, JSON, XML, TXT</p>
            <p class="text-xs text-gray-500">Tamanho m√°ximo: 10&nbsp;MB</p>
        </div>

        <!-- Bot√µes de processamento -->
        <div class="flex gap-3 items-center">
          <button id="processBtn"
            class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-md disabled:opacity-40 disabled:cursor-not-allowed flex items-center gap-2"
            disabled>
            <span id="processIcon">üìä</span>
            <span id="processText">Processar Arquivo</span>
          </button>

          <button id="clearFileBtn"
            class="text-red-600 hover:text-red-700 bg-red-50 hover:bg-red-100 px-3 py-2 rounded-md border border-red-300 hover:border-red-500 hidden flex items-center gap-2"
            title="Remover arquivo">
            <span>‚ùå</span>
            <span>Remover arquivo</span>
          </button>

          <button id="exportBtn"
            class="bg-green-600 hover:bg-green-700 text-white px-6 py-2 rounded-md disabled:opacity-40 disabled:cursor-not-allowed hidden"
            disabled>
            üìÅ Exportar JSON
          </button>

          <button id="viewJsonBtn"
            class="bg-purple-600 hover:bg-purple-700 text-white px-6 py-2 rounded-md disabled:opacity-40 disabled:cursor-not-allowed hidden"
            disabled>
            Ver JSON
          </button>
        </div>

        <!-- √Årea de avisos ao usu√°rio -->
        <div id="message" class="min-h-[24px] text-sm"></div>
      </div>
    </div>

    <!-- Modal para visualizar o JSON -->
    <div id="jsonModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
      <div class="bg-white rounded-lg shadow-xl max-w-4xl w-full mx-4 max-h-[80vh] overflow-hidden">
        <div class="p-4 border-b flex justify-between items-center">
          <h3 class="text-lg font-semibold">Dados Processados (JSON)</h3>
          <button id="closeJsonModal" class="text-gray-500 hover:text-gray-700 text-2xl">&times;</button>
        </div>
        <div class="p-4 overflow-auto max-h-96">
          <pre id="jsonContent" class="bg-gray-100 p-4 rounded text-sm overflow-auto"></pre>
        </div>
      </div>
    </div>

    <!-- Tabela com os dados processados -->
    <div id="tableContainer" class="mt-6"></div>
  </main>

  <script type="module" src="./js/main.js"></script>
</body>

</html>